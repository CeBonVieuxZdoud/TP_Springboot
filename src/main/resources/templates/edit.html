<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Édition/Suppression</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/global.css}">
</head>

<body>
<div id="divTitle">
    <h1 id="title1" th:inline="text">Modification de la commune : [[${currentVille.nomCommune}]]</h1>
</div>
<form id="addForm" method="post" th:object="${currentVille}">

    <label class="form-label" for="nomCommune"> Nom commune :
        <input class="form-control" th:field="*{nomCommune}" name="nomCommune" id="nomCommune" type="text" th:value="${currentVille.nomCommune}">
    </label>
    <label class="form-label" for="codePostal">Code Postal :
        <input class="form-control" th:field="*{codePostal}" name="codePostal" id="codePostal" type="text" th:value="${currentVille.codePostal}">
    </label>
    <label class="form-label" for="libelleAcheminement">Libellé d'acheminement :
        <input class="form-control" th:field="*{libelleAcheminement}" name="libelleAcheminement" id="libelleAcheminement" type="text" th:value="${currentVille.libelleAcheminement}">
    </label>
    <label class="form-label" for="ligne">Ligne :
        <input class="form-control" th:field="*{ligne}" name="ligne" id="ligne" type="text" th:value="${currentVille.ligne}">
    </label>
    <label class="form-label" for="latitude">Latitude :
        <input class="form-control" th:field="*{latitude}" name="latitude" id="latitude" type="text" th:value="${currentVille.latitude}">
    </label>
    <label class="form-label" for="longitude">Longitude :
        <input class="form-control" th:field="*{longitude}" name="longitude" id="longitude" type="text" th:value="${currentVille.longitude}">
    </label>
    <button class="btn btn-primary btn-lg" type="submit">Sauvegarder</button>
</form>
<button class="btn btn-primary btn-lg" th:attr="onclick=${'deleteVille(&quot;'+currentVille.codeCommune+'&quot;)'}">Supprimer</button>
<button type="button" class="btn btn-primary btn-lg" th:attr="onclick=${'goToList()'}">Liste</button>
</body>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script th:inline="javascript">
    function goToList() {
        window.location.href = "list";
    }
    function deleteVille(codeCommune){
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState === 4 && this.status === 200) {
                window.location.href="/list";
            }
        };
        xhttp.open("DELETE", "http://localhost:8081/edit?codeCommune=" + codeCommune, true);
        xhttp.send();
    }
</script>
</html>